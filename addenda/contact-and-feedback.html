<!DOCTYPE html>
<html lang="en">

<!-- eikjo.net -->
<!-- Website for the history of the place Ytre Eikjo in Norway. -->
<!-- Stared and created by Terje Urnes in april 2021. -->
<!-- Plan for finishing, never. -->

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Terje Urnes">
	<meta name="keywords" content="Historical">
	<META NAME="geo.position" CONTENT="61.330622; 7.326733">
	<META NAME="geo.placename" CONTENT="Ytre Eikjo">
	<META NAME="geo.region" CONTENT="NOR">
	<!-- <meta name="description" content=""> -->
	
	<link rel="icon" href="/favicon.ico">
	<link rel="icon" href="/icon.svg" type="image/svg+xml">
	<link rel="apple-touch-icon" href="/apple-touch-icon.png">
	<link rel="manifest" href="/manifest.webmanifest">
	
	<link rel="license" href="/addenda/about.html#license">
	
	<style>
		html { overflow-x: hidden; }
		img { 
			max-width: 100vw; 
			height: auto;
		}	
		.content-section { max-width: 100%; }
		@media only screen and (max-width: 550px) {
			html { font-size: 17px; }
			#page-content-layout {
				width: 100vw;
				max-width: 100vw;
			}}
		@media only screen and (min-width: 550px) {
			html { font-size: 18.5px; }
			#page-content-layout {
				width: 80vw;
				max-width: 100vw;
			}}
		@media only screen and (min-width: 1000px) {
			html { font-size: 21px; }
			#page-content-layout {
				width: 60vw;
				max-width: 100vw;
			}}
	</style>
	
	<link rel="stylesheet" href="../stylesheets/styling.css">
	<script src="../script/scripts.js"></script>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
	</script>
	
	<script>
	
	document.addEventListener('readystatechange', function() {
    		if (document.readyState === "complete") {
     	 			onload();
    		}
    	});
	
	function onSubmit(token) {
		$("#responce").show();
		$("#responce-error").text("");
        $("#responce-msg").text("Sending the message. Waiting on responce from server.");
        
        $("#the-msg").text($("#message-input").val());
		$("#the-msg").show();
      
      	let data = {
			name: $("#name-input").val(),
			email: $("#email-input").val(),
			message: $("#message-input").val()
		};
		
		let name = $("#name-input").val();
	
		$.ajax({
			type: "POST",
			url: "https://api.eikjo.net/contact-us",
			dataType: "json",
			crossDomain: "true",
			contentType: "application/json; charset=utf-8",
			data: JSON.stringify(data),
			success: function(data) {
				if (data["errorMessage"]) {
					errorMessage({"body":"Big failure in the server."});
					return;
				}
                let returnStr = data["body"];
                let responce = "" + returnStr + " Thanks for the message " + name + " :)"
                
                $("#responce-msg").text(responce);
            	return data;
        	},
        	error: function(xhr, status, error) {
        		let xhrJson = JSON.parse(xhr.responseText);
        		errorMessage(xhrJson);
        	},
        	timeout: 3000
		});

		
		$("#contact-form").trigger("reset");
		$("#name-input").trigger("reset");
    	$("#email-input").trigger("reset");
      
      	grecaptcha.reset();
    }
    
    function errorMessage(data) {
    			var returnStr = "";
    			if (data["body"]) {
    				returnStr = data["body"];
    			}
        		$("#responce-error").text("I got a failed response");
            	$("#responce-msg").text("when trying to send the message. Please try again later or contact me on author@eikjo.net. " + returnStr);
    }
    
	function validate(event) {
      event.preventDefault();
      $("#responce").show();
      $("#the-msg").hide();
      if (!document.getElementById('message-input').value) {
        $("#responce-error").text("Sorry,");
        $("#responce-msg").text("but a message is required.");
        $("#message-input").css("border-color", "red");
      } else {
      	$("#message-input").css("border-color", "black");
        grecaptcha.execute();
      }
    }
    
    function onload() {
      var element = document.getElementById('submit');
      element.onclick = validate;
    }
	
	</script>

	<script src="https://www.google.com/recaptcha/api.js" async defer></script>
	
<!-- ****** JSON-LD start ****** -->
	
<script type="application/ld+json">
[
	{
		"@context": "http://schema.org",
		"@type": "WebPage",
		"@id": "https://eikjo.net/addenda/contact-and-feedback.html#page",
		"name": "Laberg",
		"speakable": {
			"@type": "SpeakableSpecification",
			"cssSelector": [
				"#title1"
			]
		},
		"url": "https://eikjo.net/addenda/contact-and-feedback.html"
	},
	{
		"@context": "https://schema.org",
 		"@type": "BreadcrumbList",
 		"@id": "https://eikjo.net/addenda/contact-and-feedback.html#breadcrumb",
 		"itemListElement": [
 			 {
			   	"@type": "ListItem",
			   	"position": 1,
			   	"name": "Home",
			   	"item": {
			   		"@type": "WebPage",
					"@id": "https://eikjo.net/#page".
					"type": "https://eikjo.net/"
				}
			},
			{
				"@type": "ListItem",
				"position": 2,
				"name": "Contact and feedback",
				"item": {
				 	"@type": "WebPage",
					"@id": "https://eikjo.net/addenda/contact-and-feedback.html#page",
					"type": "https://eikjo.net/addenda/contact-and-feedback.html"
			   }
			}
 		]
	}
]
</script>

<!-- ****** JSON-LD end ****** -->
	
	<!-- HUSK TITLE!!! -->
	
	<title>Contact and feedback on this project</title>
	
</head>


<!-- ******* The visual part of the webpage starts here. ******* -->
<body>

<!-- The content part of the page. -->
	<div id="page-content-placment">
		<div id="page-content-layout">

<header id="header-container" class="content-section">

	<div id="logo" class="logo-sub">
		<a href="../"><img src="../icons/logo.png" width="500px" height="200px"  alt="Go back to front page" title="Go back to front page"></a>
	</div>

	<nav id="shortcut-to-menu"></nav>
</header>

<main id="story" class="content-section">

<!-- ~~~~~~~~ Content starts here ~~~~~~~~ -->

<h1 id="title1">Contact and feedback</h1>

<p id="responce">
<spam id="responce-error"></spam>
<spam id="responce-msg"></spam>
</p>

<p id="the-msg"></p>

<p>
All messages are appreciated. Supplementary information or referral to other sources am I warmly thankful if you can share with me.
</p>

<form id="contact-form">
	<div id='recaptcha' class="g-recaptcha"
          data-sitekey="6LckD6gaAAAAAJZU4g4SlFqBJxmfaMKvGibt0nLM"
          data-callback="onSubmit"
          data-size="invisible"></div>
	<textarea id="message-input" rows="15" placeholder="A message from you is required. Du kan skrive pÃ¥ norsk."></textarea>
	<input type="text" id="name-input" placeholder="A name would be nice."/>
	<input type="email" id="email-input" placeholder="An email address for replays."/>
    <button id='submit'>Submit</button>
    </form>
    
<!-- ~~~~~~~~ Content ends here ~~~~~~~~ -->


</main>

<footer id="footer-container" class="content-section">

	<!-- The main menu, javascript generated -->
	<nav id="menu" aria-label="Main"></nav>

</footer>

	</div> <!-- End of page-content-layout -->
		</div> <!-- End of page-content-placment -->

		<!-- Image fullscreen view -->
		<div id="fullscreen-image"></div>

		<!-- Background image -->
		<div id="background-image-container">
			<img id="background-image" data-src="https://api.eikjo.net/getbackground" alt="">
		</div>
</body>

</html>