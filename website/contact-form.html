<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	
	<link href='https://fonts.googleapis.com/css?family=Italianno' rel='stylesheet'>
	<link rel="stylesheet" href="../stylesheets/styling-reset-by-eric-meyer.css">
	<link rel="stylesheet" href="../stylesheets/styling.css">
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
	</script>
	
	<script>
	
	document.addEventListener('readystatechange', function() {
    		if (document.readyState === "complete") {
    				console.log("Loading")
     	 			onload();
    		}
    	});
	
	function onSubmit(token) {
	
		console.log("Submit procedure has started");
      
      	data = {
			name: $("#name-input").val(),
			email: $("#email-input").val(),
			message: $("#message-input").val()
		};
	
		console.log(data);
	
		$.ajax({
			type: "POST",
			url: "https://api.eikjo.net/contact-us",
			dataType: "json",
			crossDomain: "true",
			contentType: "application/json; charset=utf-8",
			data: JSON.stringify(data)
		});
		
		console.log("Submit procedure has Endedt");
		
		$("#message-input").hide();
      
    }
    
    function onError() {
    	
    	console.log("Error!");
    	
    	$(".error-msg").text("Error: reCaptcha can not verfify that you are human. Please try again later.");
    	$(".your-msg").text($("#message-input").val());
    	$(".form-error").show();
    	
    	$("#message-input").hide();
    	$("#name-input").hide();
    	$("#email-input").hide();
    
    }
	
	function validate(event) {
      event.preventDefault();
      if (!document.getElementById('name-input').value) {
        alert("You must add text to the required field");
      } else {
      	console.log("Ready to execute");
        grecaptcha.execute();
        console.log("We have executed");
      }
    }
    
    function onload() {
      var element = document.getElementById('submit');
      element.onclick = validate;
    }
	
	</script>

	<script src="https://www.google.com/recaptcha/api.js" async defer></script>
	
	<title>Ytre Eikjo - sources</title>
</head>
<body>

<div class="centered">
<div class="content content-width top-space-subpage"> 


<h1 class="top content-object h1-subpage">

<a href="../index.html#header">Ytre Eikjo</a>
</h1>


<div class="text2 content-object">

<div class="form-error">
<p class="error-msg"></p>
<p class="your-msg"></p>
</div>

<form class="contact-form">
	<div id='recaptcha' class="g-recaptcha"
          data-sitekey="6LckD6gaAAAAAJZU4g4SlFqBJxmfaMKvGibt0nLM"
          data-callback="onSubmit"
          data-error-callback="onError"
          data-size="invisible"></div>
	<textarea id="message-input" rows="10" placeholder="Your message here."></textarea>
	<input type="text" id="name-input" placeholder="Your name."/>
	<input type="email" id="email-input" placeholder="Your email address."/>
    <button id='submit'>submit</button>
    </form>
    

</div>


<div class="menu-footer content-object"> 


<ul>
	<li>
		<ul class="menu-vertical">
			<li>
				<a href="../index.html#header" title="Writing log" class="menu-icon menu-object">
				<img src="../icons/home.png" alt"Map"><spam class="menu-home"> Ytre Eikjo</spam></a>
			</li>
			<li>
				<a href="map.html" title="Writing log" class="menu-icon menu-object">
				<img src="../icons/map.png" alt"Map"> Map</a>
			</li>
		</ul>
	</li>
	<li>
		<ul class="menu-content">
			<li class="menu-content-header">
				<span class="menu-icon"><img src="../icons/content.png"> Story content</span>
			</li>
			<li>
				<ul class="menu-content-column">
					<li>
					<a href="../index.html#header" title="Laberg" class="meni-object-content" ><span class="seksjon-number">1</span> Introduction, the farm</a>
					</li>
					<li>
						<a href="../laberg.html" title="Laberg" class="meni-object-content" ><span class="seksjon-number">2</span> Laberg</a>
					</li>
					
				</ul>
			</li>
		</ul>
	</li>
	<li>
		<ul class="menu-vertical">
			<li>
				<a href="writing-log.html" title="Writing log" class="menu-icon menu-object">
				<img src="../icons/log.png" alt"Log book"> Writing log</a>
			</li>
			<li>
				<a href="sources.html" title="Sources" class="menu-icon menu-object">
				<img src="../icons/sources.png" alt"Sources"> Sources</a>
			</li>
			<li>
				<a href="about.html" title="About" class="menu-icon menu-object">
				<img src="../icons/about.png" alt"About this page."> About</a>
			</li>
			<li>
				<spam class="current-page menu-icon menu-object">
				<img src="../icons/contact.png" alt"Log book"> Contact</spam>
			</li>
		</ul>
	</li>
</ul>

</div>
</div></div>

<div class="backgroundImg">
<img src="https://api.eikjo.net/getbackground">
</div>




</body>
</html>